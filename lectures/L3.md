# Loop Functions and Debugging

## Loop Functions

**Looping on the Command Line**

Writing for, while loops is useful when programming but not particularly easy when working
interactively on the command line. There are some functions which implement looping to make
life easier.

* `lapply`: Loop over a list and evaluate a function on each element

* `sapply`: Same as `lapply` but try to simplify the result

* `apply`: Apply a function over the margins of an array

* `tapply`: Apply a function over subsets of a vector

* `mapply`: Multivariante version of `lapply`

An auxiliary function `split` is also useful, particularly in conjunction with `lapply`.

**lapply**

`lapply` takes three arguments: (1) a list `x`; (2) a function (or the name of a function) `FUN`;
(3) other arguments via its ... argument. If `x` is not a list, it will be coereced to a list using
`as.list`

`lapply` always returns a list, regardless of the class of the input.

`lapply` and friends make heavy use of anonymous functions.

An anonymous function for extracting the first column of each matrix.

**sapply**

`sapply` will try to simplify the result of `lapply` if possible.

* If the result is a list where every element is length 1, then a vector is returned

* If the result is a list where every element is a vector of the same length (>1), a matrix is returned 

* If it can not figure things out, a list is returned

**apply**

`apply` is used to evaluate a function (often an anonymous one) over the margins of an array.

* It is most often used to apply a function to the rows or columns of a matrix

* It can be used with general array, e.g. taking the average of an array of matrices

* It is not really faster than writing a loop, but it works in one line

```
> str(apply)
function (X, MARGIN, FUN, ...)
```

* `X` is an array

* `MARGIN` is an integer vector indicating which margins should be "retained"

* `FUN` is a function to be applied

* ... is for other arguments to be passed to `FUN`

**col/row sums and means**

For sums and means of matrix dimensions, we have some shortcuts.

* `rowSums = apply(x, 1, sum)`

* `rowMeans = apply(x, 1, mean)`

* `colSums = apply(x, 2, sum)`

* `colMeans = apply(x, 2, mean)`

The shortcut functions are much faster, but you won't notice unless you are using a large matrix.

**Other Ways to Apply**

Quantiles of the rows of a matrix





























